# manga-stock-prices

<p>
<img alt="Docker" src="https://img.shields.io/badge/-Docker-2496ED?style=flat&logo=docker&logoColor=white" style="width:6%" />
<img alt="PySpark" src="https://img.shields.io/badge/-Apache%20Spark-E25A1C?style=flat&logo=apachespark&logoColor=white" style="width:9.5%" />
<img alt="Kafka" src="https://img.shields.io/badge/-Apache Kafka-231F20?style=flat&logo=apachekafka&logoColor=white" style="width:9.5%" />
<img alt="MinIO" src="https://img.shields.io/badge/-MinIO-C72E49?style=flat&logo=minio&logoColor=white" style="width:5.7%" />
<img alt="Trino" src="https://img.shields.io/badge/-Trino-DD00A1?style=flat&logo=trino&logoColor=white" style="width:5.2%" />
<img alt="Apache Superset" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Superset_logo.svg/512px-Superset_logo.svg.png?20210129193338" style="width:7.3%" />

---

This is a simple pipeline project to extract data from a realtime system (finnhub websocket API), ingest in a kafka topic to consume and aggregate in a pyspark streaming process, and ingest in an OTF table (delta lake) inside a blob storage (minio). After that, consume the data through a query engine (trino) and show some charts in a BI tool (superset).

To this project we'll be use stock price data from MANGA companies.

<img src="assets/manga_logo.png" >

## Pipeline

<img src="assets/pipeline.png" /> 

## Folder Structure

```markdown
├── README.md
├── assets           <- For resources like images and documents
├── docker           <- Docker images and volume configurations
|   └── config       <- Config files to mirror in volumes
|       ├── minio
│       └── trino              
├── source           <- Source code
|    ├── modules     <- Python modules with some pieces of code
│    └── scripts     <- General purpose scripts in python and sql   
```

---

## Launch the Project

```bash
sh build.sh
```

## Services

- `Minio` - available on [http://localhost:9001](http://localhost:9001)
- `Superset` - available on [http://localhost:8088/](http://localhost:8088/)
- `Kafka UI` - available on [http://localhost:8080/](http://localhost:8080/)
- `Trino UI` - available on [http://localhost:8080/](http://localhost:8080/)


### Connections

- trino URI on superset connection: `trino://trino@trino:8080/hive`